<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TerraPower Signature Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #62B73D;
            --primary-dark: #4d9130;
            --dark: #0B131B;
            --bg: #F8F9FA;
            --white: #FFFFFF;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg);
            color: var(--dark);
            margin: 0;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar / Form */
        .generator-panel {
            width: 450px;
            background: var(--white);
            padding: 40px;
            box-shadow: 10px 0 30px rgba(0, 0, 0, 0.03);
            overflow-y: auto;
            z-index: 10;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 5px;
            font-weight: 700;
        }

        p.subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            color: #888;
        }

        input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #E1E1E1;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: var(--transition);
            box-sizing: border-box;
        }

        input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(98, 183, 61, 0.1);
        }

        .toggle-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .toggle-btn {
            flex: 1;
            padding: 12px;
            border: 1px solid #E1E1E1;
            background: var(--white);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: var(--transition);
        }

        .toggle-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Preview Panel */
        .preview-panel {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            background: #f0f2f5;
            position: relative;
        }

        .preview-header {
            position: absolute;
            top: 40px;
            left: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-badge {
            background: #E8F5E9;
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .card {
            background: var(--white);
            padding: 60px;
            border-radius: 24px;
            box-shadow: var(--shadow);
            max-width: 600px;
            width: 100%;
            transition: var(--transition);
        }

        .actions {
            margin-top: 40px;
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(98, 183, 61, 0.3);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: white;
            color: var(--dark);
            border: 1px solid #E1E1E1;
        }

        .btn-secondary:hover {
            background: #F8F9FA;
            border-color: #CCC;
        }

        #signature-preview {
            border: 1px dashed #EEE;
            padding: 20px;
            border-radius: 8px;
        }

        /* Notification */
        #toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--dark);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
        }

        #toast.show {
            transform: translateY(0);
            opacity: 1;
        }
    </style>
</head>

<body>

    <div class="generator-panel">
        <h1>Signature Generator</h1>
        <p class="subtitle">Enter your details below to generate your professional email signature.</p>

        <div class="form-group">
            <label>Select Template</label>
            <div class="toggle-group">
                <button class="toggle-btn active" data-type="terrapower">TerraPower</button>
                <button class="toggle-btn" data-type="tpi">TPI</button>
            </div>
        </div>

        <div class="form-group">
            <label for="input-name">Full Name</label>
            <input type="text" id="input-name" placeholder="Full Name" value="Full Name">
        </div>

        <div class="form-group">
            <label for="input-position">Position</label>
            <input type="text" id="input-position" placeholder="Position" value="Position">
        </div>

        <div class="form-group">
            <label for="input-email">Email Address</label>
            <input type="email" id="input-email" placeholder="email@terrapower.com" value="email@terrapower.com">
        </div>

        <div class="form-group">
            <label for="input-phone">Phone Number</label>
            <input type="text" id="input-phone" placeholder="+1 (555) 555-5555" value="+1 (555) 555-5555">
        </div>
    </div>

    <div class="preview-panel">
        <div class="preview-header">
            <span class="status-badge">Live Preview</span>
        </div>

        <div class="card">
            <div id="signature-preview">
                <!-- Signature will be injected here -->
            </div>
        </div>

        <div class="actions">
            <button class="btn btn-primary" id="copy-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                Copy Signature
            </button>
        </div>
    </div>

    <div id="toast">Signature copied to clipboard!</div>

    <script>
        const inputs = {
            name: document.getElementById('input-name'),
            position: document.getElementById('input-position'),
            email: document.getElementById('input-email'),
            phone: document.getElementById('input-phone')
        };

        const toggles = document.querySelectorAll('.toggle-btn');
        const preview = document.getElementById('signature-preview');
        const copyBtn = document.getElementById('copy-btn');
        const toast = document.getElementById('toast');

        let currentType = 'terrapower';

        const templates = {
            terrapower: {
                logo: 'https://raw.githubusercontent.com/Antenna-Digital/terrapower/main/assets/terrapower-logo.png',
                link: 'https://terrapower.com',
                webText: 'terrapower.com'
            },
            tpi: {
                logo: 'https://raw.githubusercontent.com/Antenna-Digital/terrapower/main/assets/tpi-logo.png',
                link: 'https://www.terrapower.com/isotopes/',
                webText: 'terrapower.com'
            }
        };

        function generateSignatureHTML() {
            const data = {
                name: inputs.name.value || 'Name',
                position: inputs.position.value || 'Position',
                email: inputs.email.value || 'email@terrapower.com',
                phone: inputs.phone.value || '',
                type: currentType
            };

            const config = templates[data.type];
            const cleanPhone = data.phone.replace(/[^\d+]/g, '');

            return `
<table cellpadding="0" cellspacing="0" border="0" width="520" style="width: 520px; border-collapse: collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; font-family: Arial, Helvetica, sans-serif;">
    <tr>
        <td style="color: #62B73D; font-size: 14px; font-weight: 700; line-height: 18px; padding-bottom: 2px;">
            <span style="color: #62B73D; font-weight: 700;">${data.name}</span>
        </td>
    </tr>
    <tr>
        <td style="color: #0B131B; font-size: 12px; font-weight: 700; line-height: 16px; padding-bottom: 12px;">
            <span style="color: #0B131B; font-weight: 700;">${data.position}</span>
        </td>
    </tr>
    <tr>
        <td style="color: #0B131B; font-size: 12px; font-weight: 400; line-height: 16px; padding-bottom: 12px;">
            <span style="color: #0B131B;">
                ${data.phone ? `<span style="color: #0B131B; font-weight: 700;">T: </span><a href="tel:${cleanPhone}" style="color: #0B131B; text-decoration: none; border: none;"><span style="color: #0B131B;">${data.phone}</span></a><br>` : ''}
                <span style="color: #0B131B; font-weight: 700;">E: </span><a href="mailto:${data.email}" style="color: #0B131B; text-decoration: none; border: none;"><span style="color: #0B131B;">${data.email}</span></a>
            </span>
        </td>
    </tr>
    <tr>
        <td style="color: #62B73D; font-size: 12px; font-weight: 700; line-height: 16px; padding-bottom: 15px;">
            <span style="color: #62B73D; font-weight: 700;">
                <a href="${config.link}" style="color: #62B73D; text-decoration: none; border: none;">${config.webText}</a>
            </span>
        </td>
    </tr>
    <tr>
        <td style="padding-bottom: 20px;">
            <table cellpadding="0" cellspacing="0" border="0" width="100%" style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td height="1" bgcolor="#808080" style="font-size: 1px; line-height: 1px; background-color: #808080; width: 100%; height: 1px;">&nbsp;</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td valign="top" style="padding-bottom: 20px;">
            <table cellpadding="0" cellspacing="0" border="0" width="100%" style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td valign="middle" align="left" style="padding-right: 20px;">
                        <a href="${config.link}" style="border: none; text-decoration: none; display: block;">
                            <img src="${config.logo}" alt="TerraPower" width="150" height="auto" style="display: block; border: 0; outline: none;" />
                        </a>
                    </td>
                    <td valign="middle" align="right" width="100">
                        <table cellpadding="0" cellspacing="0" border="0" align="right" style="border-collapse: collapse;">
                            <tr>
                                <td style="padding-right: 5px;">
                                    <a href="https://www.linkedin.com/company/terrapower/" style="border: none; text-decoration: none; display: block;">
                                        <img src="https://raw.githubusercontent.com/Antenna-Digital/terrapower/main/assets/linkedin-logo.png" alt="LinkedIn" width="24" height="24" style="display: block; border: 0; outline: none;" />
                                    </a>
                                </td>
                                <td>
                                    <a href="https://twitter.com/terrapower" style="border: none; text-decoration: none; display: block;">
                                        <img src="https://raw.githubusercontent.com/Antenna-Digital/terrapower/main/assets/x-logo.png" alt="X" width="24" height="24" style="display: block; border: 0; outline: none;" />
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td style="color: #000000; font-size: 10px; font-style: italic; font-weight: 400; line-height: 13px;">
            <span style="font-style: italic; color: #000000;">
                This message may contain confidential information. If you are not the intended recipient of the message, please destroy it. Any unauthorized dissemination, distribution or copying of the material in this message, and any attachment to the message, is strictly forbidden.
            </span>
        </td>
    </tr>
</table>
`;
        }

        function updatePreview() {
            preview.innerHTML = generateSignatureHTML();
        }

        // Phone Formatting Logic
        inputs.phone.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, ''); // Remove all non-digits

            // Limit to 11 digits (1 for country code + 10 for number)
            if (value.length > 11) value = value.substring(0, 11);

            let formattedValue = '';

            if (value.length > 0) {
                formattedValue = '+1 ';

                // If the user typed 1 as the first digit, ignore it and treat the rest as the number
                // if they typed more than 10 digits total.
                let startIdx = (value.length > 10 && value[0] === '1') ? 1 : 0;
                let numPart = value.substring(startIdx);

                if (numPart.length > 0) {
                    formattedValue += '(' + numPart.substring(0, 3);
                }
                if (numPart.length > 3) {
                    formattedValue += ') ' + numPart.substring(3, 6);
                }
                if (numPart.length > 6) {
                    formattedValue += '-' + numPart.substring(6, 10);
                }
            }

            e.target.value = formattedValue;
            updatePreview();
        });

        // Event Listeners
        Object.keys(inputs).forEach(key => {
            if (key !== 'phone') {
                inputs[key].addEventListener('input', updatePreview);
            }
        });

        toggles.forEach(btn => {
            btn.addEventListener('click', () => {
                toggles.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentType = btn.dataset.type;
                updatePreview();
            });
        });

        copyBtn.addEventListener('click', () => {
            const html = generateSignatureHTML();

            // Create a temporary div to hold the HTML as a DOM element
            // This is necessary for copying as "rich text"
            const container = document.createElement('div');
            container.innerHTML = html;
            container.style.position = 'fixed';
            container.style.left = '-9999px';
            container.style.background = '#ffffff'; // Ensure white background
            container.style.color = '#000000';
            document.body.appendChild(container);

            // Select the content
            const range = document.createRange();
            range.selectNode(container);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);

            try {
                // Execute copy
                document.execCommand('copy');
                showToast();
            } catch (err) {
                console.error('Failed to copy', err);
            }

            // Cleanup
            document.body.removeChild(container);
            selection.removeAllRanges();
        });

        function showToast() {
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Initial update
        updatePreview();
    </script>
</body>

</html>